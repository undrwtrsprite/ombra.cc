<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Password Generator â€” ombra tools</title>
  <link rel="stylesheet" href="/assets/styles/base.css" />
</head>
<body>
  <div class="bg-layer bg-gradient"></div>
  <div class="bg-layer bg-mesh"></div>
  <nav class="nav">
    <ul>
      <li><a href="/" class="logo">ombra</a></li>
      <li><a href="/index.html#tools">Tools</a></li>
    </ul>
  </nav>

  <main class="tool-container">
    <div class="tool-card reveal visible">
      <div class="tool-header">
        <div class="tool-icon">ðŸ”‘</div>
        <h1>Password Generator</h1>
      </div>
      <div class="tool-body">
        <div class="toolbar" role="toolbar" aria-label="Password Generator">
          <label for="length">Length</label>
          <input type="number" id="length" min="6" value="16" />
          <label><input type="checkbox" id="lower" checked /> a-z</label>
          <label><input type="checkbox" id="upper" checked /> A-Z</label>
          <label><input type="checkbox" id="digits" checked /> 0-9</label>
          <label><input type="checkbox" id="symbols" /> !@#$...</label>
          <span class="spacer"></span>
          <button class="btn-secondary" id="copy">Copy</button>
          <button class="btn-primary" id="generate">Generate</button>
        </div>
        <div class="control-row">
          <input type="text" id="output" readonly style="flex:1; min-width: 280px;" />
        </div>
      </div>
    </div>
  </main>

  <script src="/assets/scripts/effects.js"></script>
  <script>
    const length = document.getElementById('length');
    const lower = document.getElementById('lower');
    const upper = document.getElementById('upper');
    const digits = document.getElementById('digits');
    const symbols = document.getElementById('symbols');
    const output = document.getElementById('output');
    const generateBtn = document.getElementById('generate');
    const copyBtn = document.getElementById('copy');

    const chars = {
      lower: 'abcdefghijklmnopqrstuvwxyz',
      upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
      digits: '0123456789',
      symbols: '!@#$%^&*()_+{}[]|:;<>,.?/~-='
    };

    function secureRandomInt(max) {
      const arr = new Uint32Array(1); window.crypto.getRandomValues(arr); return arr[0] % max;
    }

    function generate() {
      let pool = '';
      if (lower.checked) pool += chars.lower;
      if (upper.checked) pool += chars.upper;
      if (digits.checked) pool += chars.digits;
      if (symbols.checked) pool += chars.symbols;
      if (!pool) { alert('Select at least one character set'); return; }
      let pass = '';
      for (let i = 0; i < Number(length.value); i++) {
        const idx = secureRandomInt(pool.length);
        pass += pool[idx];
      }
      output.value = pass;
    }

    generateBtn.addEventListener('click', generate);
    copyBtn.addEventListener('click', async () => { await navigator.clipboard.writeText(output.value || ''); });

    generate();
  </script>
</body>
</html>

