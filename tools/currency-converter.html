<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Currency Converter â€” ombra tools</title>
  <link rel="stylesheet" href="/assets/styles/base.css" />
</head>
<body>
  <div class="bg-layer bg-gradient"></div>
  <div class="bg-layer bg-mesh"></div>
  <nav class="nav">
    <ul>
      <li><a href="/" class="logo">ombra</a></li>
      <li><a href="/index.html#tools">Tools</a></li>
    </ul>
  </nav>

  <main class="tool-container">
    <div class="tool-card reveal visible">
      <div class="tool-header">
        <div class="tool-icon">ðŸ’±</div>
        <h1>Currency Converter</h1>
      </div>
      <div class="tool-body">
        <div class="toolbar" role="toolbar" aria-label="Currency Converter">
          <label for="amount">Amount</label>
          <input type="number" id="amount" value="1" min="0" step="0.01" />
          <label for="fromCurrency">From</label>
          <select id="fromCurrency">
            <option value="USD">USD - US Dollar</option>
            <option value="EUR">EUR - Euro</option>
            <option value="GBP">GBP - British Pound</option>
            <option value="JPY">JPY - Japanese Yen</option>
            <option value="CAD">CAD - Canadian Dollar</option>
            <option value="AUD">AUD - Australian Dollar</option>
            <option value="CHF">CHF - Swiss Franc</option>
            <option value="CNY">CNY - Chinese Yuan</option>
            <option value="INR">INR - Indian Rupee</option>
            <option value="BRL">BRL - Brazilian Real</option>
          </select>
          <label for="toCurrency">To</label>
          <select id="toCurrency">
            <option value="EUR">EUR - Euro</option>
            <option value="USD">USD - US Dollar</option>
            <option value="GBP">GBP - British Pound</option>
            <option value="JPY">JPY - Japanese Yen</option>
            <option value="CAD">CAD - Canadian Dollar</option>
            <option value="AUD">AUD - Australian Dollar</option>
            <option value="CHF">CHF - Swiss Franc</option>
            <option value="CNY">CNY - Chinese Yuan</option>
            <option value="INR">INR - Indian Rupee</option>
            <option value="BRL">BRL - Brazilian Real</option>
          </select>
          <span class="spacer"></span>
          <button class="btn-secondary" id="swap">Swap</button>
          <button class="btn-primary" id="convert">Convert</button>
        </div>
        <div class="result" id="result">
          <div class="conversion-rate" id="rate"></div>
          <div class="converted-amount" id="converted"></div>
        </div>
        <div class="historical" id="historical">
          <h3>Historical Rates (Last 7 Days)</h3>
          <div class="chart-container" id="chart"></div>
        </div>
        <p class="note">Exchange rates are approximate and may vary. For accurate rates, check with your financial institution.</p>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/assets/scripts/effects.js"></script>
  <script>
    const amountInput = document.getElementById('amount');
    const fromCurrency = document.getElementById('fromCurrency');
    const toCurrency = document.getElementById('toCurrency');
    const convertBtn = document.getElementById('convert');
    const swapBtn = document.getElementById('swap');
    const result = document.getElementById('result');
    const rate = document.getElementById('rate');
    const converted = document.getElementById('converted');
    const historical = document.getElementById('historical');
    const chart = document.getElementById('chart');

    // Mock exchange rates (in real app, use API like exchangerate-api.com)
    const rates = {
      USD: { EUR: 0.85, GBP: 0.73, JPY: 110.0, CAD: 1.25, AUD: 1.35, CHF: 0.92, CNY: 6.45, INR: 74.5, BRL: 5.25 },
      EUR: { USD: 1.18, GBP: 0.86, JPY: 129.4, CAD: 1.47, AUD: 1.59, CHF: 1.08, CNY: 7.59, INR: 87.6, BRL: 6.18 },
      GBP: { USD: 1.37, EUR: 1.16, JPY: 150.7, CAD: 1.71, AUD: 1.85, CHF: 1.26, CNY: 8.84, INR: 102.0, BRL: 7.19 },
      JPY: { USD: 0.009, EUR: 0.0077, GBP: 0.0066, CAD: 0.011, AUD: 0.012, CHF: 0.0084, CNY: 0.059, INR: 0.68, BRL: 0.048 },
      CAD: { USD: 0.80, EUR: 0.68, GBP: 0.58, JPY: 88.0, AUD: 1.08, CHF: 0.74, CNY: 5.16, INR: 59.6, BRL: 4.20 },
      AUD: { USD: 0.74, EUR: 0.63, GBP: 0.54, JPY: 81.5, CAD: 0.93, CHF: 0.68, CNY: 4.78, INR: 55.2, BRL: 3.89 },
      CHF: { USD: 1.09, EUR: 0.93, GBP: 0.79, JPY: 119.6, CAD: 1.36, AUD: 1.47, CNY: 7.01, INR: 81.0, BRL: 5.71 },
      CNY: { USD: 0.155, EUR: 0.132, GBP: 0.113, JPY: 17.1, CAD: 0.194, AUD: 0.209, CHF: 0.143, INR: 11.6, BRL: 0.814 },
      INR: { USD: 0.0134, EUR: 0.0114, GBP: 0.0098, JPY: 1.48, CAD: 0.0168, AUD: 0.0181, CHF: 0.0123, CNY: 0.086, BRL: 0.070 },
      BRL: { USD: 0.19, EUR: 0.162, GBP: 0.139, JPY: 21.0, CAD: 0.238, AUD: 0.257, CHF: 0.175, CNY: 1.23, INR: 14.3 }
    };

    function convertCurrency() {
      const amount = parseFloat(amountInput.value);
      const from = fromCurrency.value;
      const to = toCurrency.value;
      
      if (from === to) {
        rate.textContent = `1 ${from} = 1 ${to}`;
        converted.textContent = `${amount.toFixed(2)} ${to}`;
        return;
      }

      let rateValue;
      if (rates[from] && rates[from][to]) {
        rateValue = rates[from][to];
      } else if (rates[to] && rates[to][from]) {
        rateValue = 1 / rates[to][from];
      } else {
        // Cross-rate calculation
        const usdFrom = rates[from] ? rates[from].USD : 1;
        const usdTo = rates[to] ? rates[to].USD : 1;
        rateValue = usdTo / usdFrom;
      }

      const convertedAmount = amount * rateValue;
      rate.textContent = `1 ${from} = ${rateValue.toFixed(4)} ${to}`;
      converted.textContent = `${amount.toFixed(2)} ${from} = ${convertedAmount.toFixed(2)} ${to}`;
      
      updateHistoricalChart(from, to);
    }

    function updateHistoricalChart(from, to) {
      // Generate mock historical data
      const dates = [];
      const values = [];
      const today = new Date();
      
      for (let i = 6; i >= 0; i--) {
        const date = new Date(today);
        date.setDate(date.getDate() - i);
        dates.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
        
        // Add some variation to mock historical data
        let baseRate = 1;
        if (rates[from] && rates[from][to]) {
          baseRate = rates[from][to];
        } else if (rates[to] && rates[to][from]) {
          baseRate = 1 / rates[to][from];
        }
        
        const variation = (Math.random() - 0.5) * 0.02; // Â±1% variation
        values.push(baseRate * (1 + variation));
      }

      if (window.historicalChart) {
        window.historicalChart.destroy();
      }

      const ctx = chart.getContext('2d');
      window.historicalChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: dates,
          datasets: [{
            label: `${from} to ${to}`,
            data: values,
            borderColor: '#7877c6',
            backgroundColor: 'rgba(120, 119, 198, 0.1)',
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `${context.parsed.y.toFixed(4)} ${to}`;
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: false,
              grid: { color: 'rgba(255,255,255,0.1)' },
              ticks: { color: '#f5f5f7' }
            },
            x: {
              grid: { color: 'rgba(255,255,255,0.1)' },
              ticks: { color: '#f5f5f7' }
            }
          }
        }
      });
    }

    convertBtn.addEventListener('click', convertCurrency);
    swapBtn.addEventListener('click', () => {
      const temp = fromCurrency.value;
      fromCurrency.value = toCurrency.value;
      toCurrency.value = temp;
      convertCurrency();
    });

    // Auto-convert on input change
    [amountInput, fromCurrency, toCurrency].forEach(el => {
      el.addEventListener('change', convertCurrency);
    });

    // Initial conversion
    convertCurrency();
  </script>

  <style>
    .result { text-align: center; margin: 2rem 0; }
    .conversion-rate { font-size: 1.2rem; color: #a1a1a6; margin-bottom: 0.5rem; }
    .converted-amount { font-size: 2rem; font-weight: 600; }
    .historical { margin-top: 2rem; }
    .historical h3 { margin-bottom: 1rem; text-align: center; }
    .chart-container { height: 300px; position: relative; }
  </style>
</body>
</html>
