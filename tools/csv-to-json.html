<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CSV to JSON â€” ombra tools</title>
  <meta name="description" content="Convert CSV files or pasted CSV text to JSON instantly in your browser." />
  <link rel="stylesheet" href="/assets/styles/base.css" />
</head>
<body>
  <div class="bg-layer bg-gradient"></div>
  <div class="bg-layer bg-mesh"></div>
  <nav class="nav">
    <ul>
      <li><a href="/" class="logo">ombra</a></li>
      <li><a href="/index.html#tools">Tools</a></li>
    </ul>
  </nav>

  <main class="tool-container">
    <div class="tool-card reveal visible">
      <div class="tool-header">
        <div class="tool-icon">ðŸ”„</div>
        <h1>CSV to JSON</h1>
      </div>
      <div class="tool-body">
        <div class="toolbar" role="toolbar" aria-label="CSV to JSON">
          <label for="csvFile">CSV file</label>
          <input type="file" id="csvFile" accept=".csv,text/csv" />
          <button class="btn-secondary" id="parseFileBtn">Parse File</button>
          <span class="spacer"></span>
          <button class="btn-primary" id="parseTextBtn">Convert</button>
          <button class="btn-secondary" id="downloadBtn" style="display:none;">Download JSON</button>
        </div>
        <div class="control-row">
          <label>or paste CSV</label>
          <textarea id="csvText" placeholder="name,age\nAlice,30\nBob,28"></textarea>
        </div>
        <div class="result" id="output" style="margin-top:12px;"></div>
        <p class="note">Everything runs locally. For big CSVs, prefer file upload.</p>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="/assets/scripts/effects.js"></script>
  <script>
    const csvFile = document.getElementById('csvFile');
    const parseFileBtn = document.getElementById('parseFileBtn');
    const csvText = document.getElementById('csvText');
    const parseTextBtn = document.getElementById('parseTextBtn');
    const output = document.getElementById('output');
    const downloadBtn = document.getElementById('downloadBtn');

    function showResult(data) {
      const json = JSON.stringify(data, null, 2);
      output.innerHTML = `<pre style="white-space:pre-wrap; word-break:break-word;">${json}</pre>`;
      const blob = new Blob([json], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      downloadBtn.style.display = 'inline-block';
      downloadBtn.onclick = () => { const a = document.createElement('a'); a.href = url; a.download = 'data.json'; a.click(); };
    }

    parseFileBtn.addEventListener('click', () => {
      const file = csvFile.files && csvFile.files[0];
      if (!file) return;
      Papa.parse(file, { header: true, skipEmptyLines: true, complete: (res) => showResult(res.data) });
    });

    parseTextBtn.addEventListener('click', () => {
      const text = csvText.value || '';
      const res = Papa.parse(text, { header: true, skipEmptyLines: true });
      showResult(res.data);
    });
  </script>
</body>
</html>


