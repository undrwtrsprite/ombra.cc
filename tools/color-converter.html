<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Converter - Ombra Tools</title>
    <link rel="stylesheet" href="../assets/styles/base.css">
</head>
<body>
    <div class="bg-layer bg-gradient"></div>
    <div class="bg-layer bg-mesh"></div>
    <div class="bg-animation" id="bgAnimation"></div>



    <main class="tool-container">
        <div class="tool-card">
            <div class="tool-header">
                <div class="tool-icon">ðŸŽ¨</div>
                <h1>Color Converter</h1>
            </div>
            
            <div class="tool-body">
                <div class="control-row">
                    <label for="colorInput">Color:</label>
                    <input type="text" id="colorInput" placeholder="Enter color (e.g., #ff0000, rgb(255,0,0), red)" value="#6366f1">
                    <button class="btn-primary" onclick="convertColor()">Convert</button>
                </div>

                <div class="result" id="result" style="display: none;">
                    <h3>Converted Values</h3>
                    <div class="color-preview" id="colorPreview"></div>
                    <div class="conversions">
                        <div class="conversion-item">
                            <label>HEX:</label>
                            <input type="text" id="hexValue" readonly>
                            <button class="btn-secondary" onclick="copyToClipboard('hexValue')">Copy</button>
                        </div>
                        <div class="conversion-item">
                            <label>RGB:</label>
                            <input type="text" id="rgbValue" readonly>
                            <button class="btn-secondary" onclick="copyToClipboard('rgbValue')">Copy</button>
                        </div>
                        <div class="conversion-item">
                            <label>HSL:</label>
                            <input type="text" id="hslValue" readonly>
                            <button class="btn-secondary" onclick="copyToClipboard('hslValue')">Copy</button>
                        </div>
                        <div class="conversion-item">
                            <label>CMYK:</label>
                            <input type="text" id="cmykValue" readonly>
                            <button class="btn-secondary" onclick="copyToClipboard('cmykValue')">Copy</button>
                        </div>
                        <div class="conversion-item">
                            <label>HSV:</label>
                            <input type="text" id="hsvValue" readonly>
                            <button class="btn-secondary" onclick="copyToClipboard('hsvValue')">Copy</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="../assets/scripts/back-button.js"></script>
    <script>
        function convertColor() {
            const input = document.getElementById('colorInput').value.trim();
            if (!input) return;

            try {
                let color;
                
                // Try to parse the color
                if (input.startsWith('#')) {
                    color = parseHex(input);
                } else if (input.startsWith('rgb')) {
                    color = parseRgb(input);
                } else if (input.startsWith('hsl')) {
                    color = parseHsl(input);
                } else {
                    // Try as named color
                    color = parseNamedColor(input);
                }

                if (color) {
                    displayResults(color);
                    document.getElementById('result').style.display = 'block';
                } else {
                    throw new Error('Invalid color format');
                }
            } catch (error) {
                alert('Invalid color format. Please enter a valid HEX, RGB, HSL, or named color.');
            }
        }

        function parseHex(hex) {
            hex = hex.replace('#', '');
            if (hex.length === 3) {
                hex = hex.split('').map(c => c + c).join('');
            }
            if (hex.length !== 6) throw new Error('Invalid HEX');
            
            const r = parseInt(hex.substr(0, 2), 16);
            const g = parseInt(hex.substr(2, 2), 16);
            const b = parseInt(hex.substr(4, 2), 16);
            
            return { r, g, b };
        }

        function parseRgb(rgb) {
            const match = rgb.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
            if (!match) throw new Error('Invalid RGB');
            
            return {
                r: parseInt(match[1]),
                g: parseInt(match[2]),
                b: parseInt(match[3])
            };
        }

        function parseHsl(hsl) {
            const match = hsl.match(/hsla?\((\d+),\s*(\d+)%,\s*(\d+)%(?:,\s*([\d.]+))?\)/);
            if (!match) throw new Error('Invalid HSL');
            
            const h = parseInt(match[1]);
            const s = parseInt(match[2]);
            const l = parseInt(match[3]);
            
            // Convert HSL to RGB
            const c = (1 - Math.abs(2 * l / 100 - 1)) * s / 100;
            const x = c * (1 - Math.abs((h / 60) % 2 - 1));
            const m = l / 100 - c / 2;
            
            let r, g, b;
            if (h < 60) { r = c; g = x; b = 0; }
            else if (h < 120) { r = x; g = c; b = 0; }
            else if (h < 180) { r = 0; g = c; b = x; }
            else if (h < 240) { r = 0; g = x; b = c; }
            else if (h < 300) { r = x; g = 0; b = c; }
            else { r = c; g = 0; b = x; }
            
            return {
                r: Math.round((r + m) * 255),
                g: Math.round((g + m) * 255),
                b: Math.round((b + m) * 255)
            };
        }

        function parseNamedColor(name) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = name;
            ctx.fillRect(0, 0, 1, 1);
            const data = ctx.getImageData(0, 0, 1, 1).data;
            
            if (data[0] === 0 && data[1] === 0 && data[2] === 0 && name !== 'black') {
                throw new Error('Invalid named color');
            }
            
            return { r: data[0], g: data[1], b: data[2] };
        }

        function displayResults(color) {
            // Color preview
            const preview = document.getElementById('colorPreview');
            preview.style.background = `rgb(${color.r}, ${color.g}, ${color.b})`;
            preview.style.width = '100px';
            preview.style.height = '100px';
            preview.style.borderRadius = '12px';
            preview.style.border = '2px solid rgba(255,255,255,0.2)';
            preview.style.marginBottom = '20px';

            // Convert to different formats
            const hex = rgbToHex(color.r, color.g, color.b);
            const rgb = `rgb(${color.r}, ${color.g}, ${color.b})`;
            const hsl = rgbToHsl(color.r, color.g, color.b);
            const cmyk = rgbToCmyk(color.r, color.g, color.b);
            const hsv = rgbToHsv(color.r, color.g, color.b);

            // Display results
            document.getElementById('hexValue').value = hex;
            document.getElementById('rgbValue').value = rgb;
            document.getElementById('hslValue').value = hsl;
            document.getElementById('cmykValue').value = cmyk;
            document.getElementById('hsvValue').value = hsv;
        }

        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => {
                const hex = x.toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }).join('');
        }

        function rgbToHsl(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return `hsl(${Math.round(h * 360)}, ${Math.round(s * 100)}%, ${Math.round(l * 100)}%)`;
        }

        function rgbToCmyk(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const k = 1 - Math.max(r, g, b);
            if (k === 1) return 'cmyk(0%, 0%, 0%, 100%)';
            
            const c = (1 - r - k) / (1 - k);
            const m = (1 - g - k) / (1 - k);
            const y = (1 - b - k) / (1 - k);
            
            return `cmyk(${Math.round(c * 100)}%, ${Math.round(m * 100)}%, ${Math.round(y * 100)}%, ${Math.round(k * 100)}%)`;
        }

        function rgbToHsv(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            const d = max - min;
            let h, s, v = max;

            s = max === 0 ? 0 : d / max;

            if (max === min) {
                h = 0;
            } else {
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return `hsv(${Math.round(h * 360)}, ${Math.round(s * 100)}%, ${Math.round(v * 100)}%)`;
        }

        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            element.select();
            element.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            const button = element.nextElementSibling;
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.style.background = 'linear-gradient(135deg, #10b981, #059669)';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '';
            }, 1000);
        }

        // Auto-convert on Enter key
        document.getElementById('colorInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                convertColor();
            }
        });

        // Convert initial color
        convertColor();
    </script>
</body>
</html>
